{
  "lockfile-version": 1,
  "manifest": {
    "version": 1,
    "install": {
      "curl": {
        "pkg-path": "curl",
        "pkg-group": "tools"
      },
      "jq": {
        "pkg-path": "jq",
        "pkg-group": "tools"
      }
    },
    "vars": {
      "KARAPACE_BOOTSTRAP_URI": "localhost:9092",
      "KARAPACE_HOST": "0.0.0.0",
      "KARAPACE_KARAPACE_REGISTRY": "true",
      "KARAPACE_KARAPACE_REST": "false",
      "KARAPACE_LOG_LEVEL": "INFO",
      "KARAPACE_PORT": "8081",
      "KARAPACE_TOPIC_NAME": "_schemas"
    },
    "hook": {
      "on-activate": "# Source karapace virtualenv activation script\nKARAPACE_RESULT=\"/home/daedalus/dev/builds/build-karapace/result-karapace\"\n\nif [ -f \"$KARAPACE_RESULT/bin/activate\" ]; then\n  source \"$KARAPACE_RESULT/bin/activate\"\n  export PATH=\"$KARAPACE_RESULT/bin:$PATH\"\nelse\n  echo \"ERROR: Karapace build not found at $KARAPACE_RESULT\"\n  echo \"Please run: cd /home/daedalus/dev/builds/build-karapace && flox build karapace\"\n  return 1\nfi\n\n# Create required directories\nmkdir -p \"$FLOX_ENV_CACHE/karapace-logs\"\n\n# Auto-detect Kafka connection from composed environment\nif [ -n \"$KAFKA_HOST\" ] && [ -n \"$KAFKA_PORT\" ]; then\n  export KARAPACE_BOOTSTRAP_URI=\"${KAFKA_HOST}:${KAFKA_PORT}\"\nelif [ -n \"$BOOTSTRAP_SERVERS\" ]; then\n  export KARAPACE_BOOTSTRAP_URI=\"$BOOTSTRAP_SERVERS\"\nfi\n\necho \"Karapace Configuration:\"\necho \"  Bootstrap URI:    $KARAPACE_BOOTSTRAP_URI\"\necho \"  Schema Registry:  http://${KARAPACE_HOST}:${KARAPACE_PORT}\"\necho \"\"\necho \"Services:\"\necho \"  flox services start karapace-registry  # Start Schema Registry\"\necho \"  flox services start                    # Start all services\"\necho \"\"\necho \"Override configuration:\"\necho \"  KARAPACE_BOOTSTRAP_URI=kafka:9092 flox activate\"\n"
    },
    "options": {
      "systems": [
        "x86_64-linux"
      ]
    },
    "services": {
      "karapace-registry": {
        "command": "# Source karapace virtualenv\nKARAPACE_RESULT=\"/home/daedalus/dev/builds/build-karapace/result-karapace\"\n\nif [ -f \"$KARAPACE_RESULT/bin/activate\" ]; then\n  source \"$KARAPACE_RESULT/bin/activate\"\nelse\n  echo \"ERROR: Karapace build not found\" | tee -a \"$FLOX_ENV_CACHE/karapace-logs/registry-error.log\"\n  exit 1\nfi\n\n# Log startup\necho \"Starting Karapace Schema Registry at $(date)\" | tee -a \"$FLOX_ENV_CACHE/karapace-logs/registry.log\"\necho \"Bootstrap URI: $KARAPACE_BOOTSTRAP_URI\" | tee -a \"$FLOX_ENV_CACHE/karapace-logs/registry.log\"\necho \"Listening on: ${KARAPACE_HOST}:${KARAPACE_PORT}\" | tee -a \"$FLOX_ENV_CACHE/karapace-logs/registry.log\"\n\n# Start Schema Registry (configured via environment variables)\nexec karapace 2>&1 | tee -a \"$FLOX_ENV_CACHE/karapace-logs/registry.log\"\n"
      }
    }
  },
  "packages": [
    {
      "attr_path": "curl",
      "broken": false,
      "derivation": "/nix/store/3q1pbfk9yfxvb9smzg8sxc6j1yh52ryf-curl-8.17.0.drv",
      "description": "Command line tool for transferring files with URL syntax",
      "install_id": "curl",
      "license": "curl",
      "locked_url": "https://github.com/flox/nixpkgs?rev=2fad6eac6077f03fe109c4d4eb171cf96791faa4",
      "name": "curl-8.17.0",
      "pname": "curl",
      "rev": "2fad6eac6077f03fe109c4d4eb171cf96791faa4",
      "rev_count": 903292,
      "rev_date": "2025-11-27T11:14:36Z",
      "scrape_date": "2025-11-29T03:48:01.320472Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "8.17.0",
      "outputs_to_install": [
        "bin",
        "man"
      ],
      "outputs": {
        "bin": "/nix/store/0rfz69vp1nl0q2hxzig20hc60sk72z62-curl-8.17.0-bin",
        "debug": "/nix/store/h1fxw0xrifxvbhcp7b8hxsgirxxxfzav-curl-8.17.0-debug",
        "dev": "/nix/store/ikmdk37frjdblkba3wl3xws2wwgln17x-curl-8.17.0-dev",
        "devdoc": "/nix/store/jm6irg81cc0hqg43l39lkxr6pb0w2xk5-curl-8.17.0-devdoc",
        "man": "/nix/store/ijd0yybyzwm98d3q6x7a9cyixgxk0i5d-curl-8.17.0-man",
        "out": "/nix/store/8idis3j5l13c3x74jl8xly0k4qyk9mx6-curl-8.17.0"
      },
      "system": "x86_64-linux",
      "group": "tools",
      "priority": 5
    },
    {
      "attr_path": "jq",
      "broken": false,
      "derivation": "/nix/store/hb8kj788b0625hspyi9x9gi2xyzy281w-jq-1.8.1.drv",
      "description": "Lightweight and flexible command-line JSON processor",
      "install_id": "jq",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=2fad6eac6077f03fe109c4d4eb171cf96791faa4",
      "name": "jq-1.8.1",
      "pname": "jq",
      "rev": "2fad6eac6077f03fe109c4d4eb171cf96791faa4",
      "rev_count": 903292,
      "rev_date": "2025-11-27T11:14:36Z",
      "scrape_date": "2025-11-29T03:48:22.780226Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "1.8.1",
      "outputs_to_install": [
        "bin",
        "man"
      ],
      "outputs": {
        "bin": "/nix/store/qvbwz06cqra3cmlra40v0adw75j6j7wm-jq-1.8.1-bin",
        "dev": "/nix/store/jq07r49vk5wa10a1kk2y87nwbbl62qxz-jq-1.8.1-dev",
        "doc": "/nix/store/brd1gvvbq8bblpbizmyjhsfwr7nlmvyq-jq-1.8.1-doc",
        "man": "/nix/store/6wpy08grkd8315ad3wsx8dd92cx5n26z-jq-1.8.1-man",
        "out": "/nix/store/gs6yqc24w093xsnnz3kkhls8jz7pnffy-jq-1.8.1"
      },
      "system": "x86_64-linux",
      "group": "tools",
      "priority": 5
    }
  ]
}
